<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="survey.result.title">ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆçµæœ - ã‚»ã‚­ãƒ¥ãƒ¬ã‚¢ã‚·ãƒ†ã‚£</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/custom.css">
  
  <script>
    window.i18nData = {
      ja: {
        'survey.result.title': 'ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆçµæœ',
        'survey.result.admin': 'ç®¡ç†è€…å‘ã‘',
        'survey.result.csv': 'CSVå‡ºåŠ›',
        'home.survey.environment': 'ä½ç’°å¢ƒã«é–¢ã™ã‚‹ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ',
        'survey.result.total': 'å›ç­”æ•°',
        'survey.result.rate': 'å›ç­”ç‡',
        'survey.result.total_residents': 'ç·ä¸–å¸¯æ•°',
        'survey.result.period': 'å®Ÿæ–½æœŸé–“',
        'survey.result.hint': 'ğŸ’¡ ãƒ’ãƒ³ãƒˆ:',
        'survey.result.hint_msg': 'ã“ã®ç”»é¢ã‚’ç†äº‹ä¼šã§å…±æœ‰ã—ã€ä½æ°‘ã®å£°ã‚’å¯è¦–åŒ–ã§ãã¾ã™ã€‚CSVå‡ºåŠ›ã§è©³ç´°åˆ†æã‚‚å¯èƒ½ã§ã™ã€‚',
        'survey.question': 'è³ªå•',
        'survey.q1.text': 'é¨’éŸ³å•é¡Œã§å›°ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ',
        'survey.q1.opt.yes': 'ã¯ã„',
        'survey.q1.opt.no': 'ã„ã„ãˆ',
        'survey.q1.opt.neither': 'ã©ã¡ã‚‰ã§ã‚‚ãªã„',
        'survey.result.unit': 'ä»¶',
        'survey.result.attention': 'âš ï¸ æ³¨ç›®:',
        'survey.result.attention_msg': '35.7%ï¼ˆ15ä¸–å¸¯ï¼‰ãŒé¨’éŸ³å•é¡Œã§å›°ã£ã¦ã„ã‚‹ã¨å›ç­”ã€‚å¯¾ç­–ã®æ¤œè¨ãŒå¿…è¦ã§ã™ã€‚',
        'survey.q2.text': 'ã©ã®æ™‚é–“å¸¯ã®é¨’éŸ³ãŒæ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ',
        'survey.multiple': 'ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰',
        'survey.q2.opt.morning': 'æ—©æœï¼ˆ6-9æ™‚ï¼‰',
        'survey.q2.opt.day': 'æ—¥ä¸­ï¼ˆ9-18æ™‚ï¼‰',
        'survey.q2.opt.evening': 'å¤œé–“ï¼ˆ18-22æ™‚ï¼‰',
        'survey.q2.opt.night': 'æ·±å¤œï¼ˆ22-6æ™‚ï¼‰',
        'survey.result.max': 'ï¼ˆæœ€å¤šï¼‰',
        'survey.result.analysis': 'ğŸ“Š åˆ†æ:',
        'survey.result.analysis_msg': 'å¤œé–“ï¼ˆ18-22æ™‚ï¼‰ã®é¨’éŸ³ãŒæœ€ã‚‚å¤šãå ±å‘Šã•ã‚Œã¦ã„ã¾ã™ï¼ˆ18ä»¶ï¼‰ã€‚ã“ã®æ™‚é–“å¸¯ã®å¯¾ç­–ã‚’å„ªå…ˆã™ã¹ãã§ã™ã€‚',
        'survey.q3.text': 'ãã®ä»–ã€ã”æ„è¦‹ãŒã‚ã‚Œã°ãŠèã‹ã›ãã ã•ã„',
        'survey.q3.free_response': 'è‡ªç”±è¨˜è¿°ï¼ˆ15ä»¶ã®å›ç­”ï¼‰',

        'survey.q3.free_response_14': 'è‡ªç”±è¨˜è¿°ï¼ˆ14ä»¶ã®å›ç­”ï¼‰',

        'survey.result.toggle': 'å…¨ã¦è¡¨ç¤º / æŠ˜ã‚ŠãŸãŸã‚€',
        'survey.result.breakdown': 'å›ç­”è€…ã®å†…è¨³',
        'survey.named': 'å®Ÿåå›ç­”',
        'survey.anonymous': 'åŒ¿åå›ç­”',
        'survey.result.last_updated': 'æœ€çµ‚æ›´æ–°',
        // --- è‡ªç”±è¨˜è¿°ã®å›ç­”ã‚­ãƒ¼ ---
        'survey.q3.res.1': 'é“è·¯ã§ã®ãƒœãƒ¼ãƒ«éŠã³ã¯ã‚ã¶ãªã„',

        'survey.q3.res.3': 'BBQã®ç…™ãŒæ°—ã«ãªã‚‹',
        'survey.q3.res.4': 'ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“',
        'survey.q3.res.5': 'è£ã®å®¶ã®ç„šãç«ãŒå¿ƒé…',
        'survey.q3.res.6': 'è»Šã®ã‚¹ãƒ”ãƒ¼ãƒ‰å‡ºã—ã™ããŒæ€–ã„',
        'survey.q3.res.7': 'éš£ã®æ¤æœ¨ãŒè¶Šå¢ƒã—ã¦ãã¦ã„ã‚‹',
        'survey.q3.res.8': 'æ·±å¤œã®è©±ã—å£°ãŒæ°—ã«ãªã‚‹',
        'survey.q3.res.9': 'å­ä¾›ã®éŠã³å£°ã¯æ°—ã«ãªã‚‰ãªã„',
        'survey.q3.res.10': 'ãƒšãƒƒãƒˆã®é³´ãå£°ã«ã¤ã„ã¦',
        'survey.q3.res.11': 'ã‚´ãƒŸå‡ºã—ã®ãƒãƒŠãƒ¼ã«ã‚‚ã†å°‘ã—æ³¨æ„ãŒå¿…è¦ã‹ãª',
        'survey.q3.res.12': 'é§è»Šå ´ã§ã®é¨’éŸ³',
        'survey.q3.res.13': 'æ”¹å–„ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™',
        'survey.q3.res.14': 'æ¦‚ã­æº€è¶³ã—ã¦ã„ã¾ã™',
        'survey.q3.res.15': 'ç®¡ç†çµ„åˆã®å¯¾å¿œã«æœŸå¾…',
        'alert.csv_export_demo': 'CSVå‡ºåŠ›æ©Ÿèƒ½ï¼ˆãƒ‡ãƒ¢ï¼‰\n\nå®Ÿé‹ç”¨ç‰ˆã§ã¯ã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆçµæœã‚’CSVãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã¾ã™ã€‚'
      },
      en: {
        'survey.result.title': 'Survey Results',
        'survey.result.admin': 'Admin View',
        'survey.result.csv': 'Export CSV',
        'home.survey.environment': 'Living Environment Survey',
        'survey.result.total': 'Responses',
        'survey.result.rate': 'Response Rate',
        'survey.result.total_residents': 'Total Households',
        'survey.result.period': 'Period',
        'survey.result.hint': 'ğŸ’¡ Tip:',
        'survey.result.hint_msg': 'Share this screen at board meetings to visualize resident feedback. CSV export allows for detailed analysis.',
        'survey.question': 'Question',
        'survey.q1.text': 'Are you troubled by noise problems?',
        'survey.q1.opt.yes': 'Yes',
        'survey.q1.opt.no': 'No',
        'survey.q1.opt.neither': 'Neither',
        'survey.result.unit': ' responses',
        'survey.result.attention': 'âš ï¸ Attention:',
        'survey.result.attention_msg': '35.7% (15 households) reported being troubled by noise. Countermeasures should be considered.',
        'survey.q2.text': 'Which time of day is the noise noticeable?',
        'survey.multiple': '(Multiple choice)',
        'survey.q2.opt.morning': 'Morning (6-9h)',
        'survey.q2.opt.day': 'Daytime (9-18h)',
        'survey.q2.opt.evening': 'Evening (18-22h)',
        'survey.q2.opt.night': 'Night (22-6h)',
        'survey.result.max': '(Most)',
        'survey.result.analysis': 'ğŸ“Š Analysis:',
        'survey.result.analysis_msg': 'Noise during the evening (18-22h) is reported most frequently (18 responses). Priority should be given to measures during this time.',
        'survey.q3.text': 'Other comments or opinions?',
        'survey.q3.free_response': 'Open-ended (15 responses)',
        'survey.q3.free_response_14': 'Open-ended (14 responses)',
        'survey.result.toggle': 'Show All / Collapse',
        'survey.result.breakdown': 'Respondent Breakdown',
        'survey.named': 'Named',
        'survey.anonymous': 'Anonymous',
        'survey.result.last_updated': 'Last Updated',
        // --- è‡ªç”±è¨˜è¿°ã®å›ç­”ã‚­ãƒ¼ ---
        'survey.q3.res.1': 'Noise from ball games on the road',
        'survey.q3.res.2': 'The sound of basketball bouncing late at night',
        'survey.q3.res.3': 'Concerned about BBQ smoke',
        'survey.q3.res.4': 'None in particular',
        'survey.q3.res.5': 'Worried about bonfires in the backyard',
        'survey.q3.res.6': 'Cars speeding is scary',
        'survey.q3.res.7': "Neighbor's tree is encroaching",
        'survey.q3.res.8': 'Loud conversations late at night',
        'survey.q3.res.9': "Children's playing voices don't bother me",
        'survey.q3.res.10': 'Regarding pet noises',
        'survey.q3.res.11': 'Some people have bad manners with garbage disposal',
        'survey.q3.res.12': 'Noise in the parking lot',
        'survey.q3.res.13': 'Hoping for improvement',
        'survey.q3.res.14': 'Generally satisfied',
        'survey.q3.res.15': 'Expecting action from the management association',
        'alert.csv_export_demo': 'CSV Export (Demo)\n\nIn the live version, you can download survey results as a CSV file.'
      },
      zh: {
        'survey.result.title': 'è°ƒæŸ¥ç»“æœ',
        'survey.result.admin': 'ç®¡ç†å‘˜è§†å›¾',
        'survey.result.csv': 'å¯¼å‡ºCSV',
        'home.survey.environment': 'å±…ä½ç¯å¢ƒè°ƒæŸ¥',
        'survey.result.total': 'å›ç­”æ•°',
        'survey.result.rate': 'å›ç­”ç‡',
        'survey.result.total_residents': 'æ€»æˆ·æ•°',
        'survey.result.period': 'å®æ–½æœŸé—´',
        'survey.result.hint': 'ğŸ’¡ æç¤º:',
        'survey.result.hint_msg': 'åœ¨ç†äº‹ä¼šä¸Šå…±äº«æ­¤å±å¹•ï¼Œä½¿å±…æ°‘çš„æ„è§å¯è§†åŒ–ã€‚CSVå¯¼å‡ºå¯è¿›è¡Œè¯¦ç»†åˆ†æã€‚',
        'survey.question': 'é—®é¢˜',
        'survey.q1.text': 'æ‚¨æ˜¯å¦å—åˆ°å™ªéŸ³é—®é¢˜çš„å›°æ‰°ï¼Ÿ',
        'survey.q1.opt.yes': 'æ˜¯',
        'survey.q1.opt.no': 'å¦',
        'survey.q1.opt.neither': 'éƒ½ä¸æ˜¯',
        'survey.result.unit': 'æ¡',
        'survey.result.attention': 'âš ï¸ æ³¨æ„:',
        'survey.result.attention_msg': '35.7%ï¼ˆ15æˆ·ï¼‰å›ç­”å—åˆ°å™ªéŸ³å›°æ‰°ã€‚éœ€è¦æ£€è®¨å¯¹ç­–ã€‚',
        'survey.q2.text': 'å“ªä¸ªæ—¶é—´æ®µçš„å™ªéŸ³è®©æ‚¨åœ¨æ„ï¼Ÿ',
        'survey.multiple': 'ï¼ˆå¯å¤šé€‰ï¼‰',
        'survey.q2.opt.morning': 'æ¸…æ™¨ (6-9ç‚¹)',
        'survey.q2.opt.day': 'ç™½å¤© (9-18ç‚¹)',
        'survey.q2.opt.evening': 'å‚æ™š (18-22ç‚¹)',
        'survey.q2.opt.night': 'æ·±å¤œ (22-6ç‚¹)',
        'survey.result.max': 'ï¼ˆæœ€å¤šï¼‰',
        'survey.result.analysis': 'ğŸ“Š åˆ†æ:',
        'survey.result.analysis_msg': 'å‚æ™šï¼ˆ18-22ç‚¹ï¼‰çš„å™ªéŸ³æŠ¥å‘Šæœ€å¤šï¼ˆ18æ¡ï¼‰ã€‚åº”ä¼˜å…ˆè€ƒè™‘æ­¤æ—¶æ®µçš„å¯¹ç­–ã€‚',
        'survey.q3.text': 'æ‚¨è¿˜æœ‰å…¶ä»–æ„è§å—ï¼Ÿ',
        'survey.q3.free_response': 'è‡ªç”±è®°è¿°ï¼ˆ15æ¡å›ç­”ï¼‰',
        'survey.q3.free_response_14': 'è‡ªç”±è®°è¿°ï¼ˆ14æ¡å›ç­”ï¼‰',
        'survey.result.toggle': 'æ˜¾ç¤ºå…¨éƒ¨ / æŠ˜å ',
        'survey.result.breakdown': 'å›ç­”è€…æ˜ç»†',
        'survey.named': 'å®åå›ç­”',
        'survey.anonymous': 'åŒ¿åå›ç­”',
        'survey.result.last_updated': 'æœ€åæ›´æ–°',
        // --- è‡ªç”±è¨˜è¿°ã®å›ç­”ã‚­ãƒ¼ ---
        'survey.q3.res.1': 'åœ¨è·¯ä¸Šç©çƒå¾ˆåµ',
        'survey.q3.res.2': 'æ·±å¤œç¯®çƒçš„å£°éŸ³å¾ˆå“',
        'survey.q3.res.3': 'BBQçš„çƒŸå‘³å¾ˆé‡',
        'survey.q3.res.4': 'æ²¡æœ‰ç‰¹åˆ«çš„',
        'survey.q3.res.5': 'æ‹…å¿ƒåé™¢çš„ç¯ç«',
        'survey.q3.res.6': 'è½¦é€Ÿå¤ªå¿«å¾ˆå“äºº',
        'survey.q3.res.7': 'é‚»å±…çš„æ ‘æè¶Šç•Œäº†',
        'survey.q3.res.8': 'æ·±å¤œçš„è¯´è¯å£°å¾ˆåµ',
        'survey.q3.res.9': 'ä¸ä»‹æ„å­©å­ä»¬çš„ç©è€å£°',
        'survey.q3.res.10': 'å…³äºå® ç‰©çš„å«å£°',
        'survey.q3.res.11': 'æœ‰äººæ‰”åƒåœ¾çš„ç¤¼ä»ªå¾ˆå·®',
        'survey.q3.res.12': 'åœè½¦åœºçš„å™ªéŸ³',
        'survey.q3.res.13': 'æœŸå¾…æ”¹å–„',
        'survey.q3.res.14': 'å¤§è‡´æ»¡æ„',
        'survey.q3.res.15': 'æœŸå¾…ç®¡ç†ç»„åˆçš„å¯¹åº”',
        'alert.csv_export_demo': 'CSVå¯¼å‡ºåŠŸèƒ½ï¼ˆæ¼”ç¤ºï¼‰\n\nåœ¨å®é™…è¿è¥ç‰ˆä¸­ï¼Œæ‚¨å¯ä»¥å°†è°ƒæŸ¥ç»“æœä¸‹è½½ä¸ºCSVæ–‡ä»¶ã€‚'
      }
    };
  </script>
  </head>
<body class="bg-gray-50">
  <div class="fixed top-4 right-4 language-switcher z-50 shadow-lg">
    <button class="lang-btn" data-lang="ja">JA</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="zh">ZH</button>
  </div>


  <header class="bg-white shadow-sm">
    <div class="max-w-4xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <button onclick="window.location.href='home.html'" class="text-gray-600 hover:text-gray-900">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
          </button>
          <div>
            <h1 class="text-xl font-bold text-gray-900" data-i18n="survey.result.title">ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆçµæœ</h1>
            <p class="text-sm text-gray-600" data-i18n="survey.result.admin">ç®¡ç†è€…å‘ã‘</p>
          </div>
        </div>
        <button onclick="exportCSV()" class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-green-700 transition">
          <span data-i18n="survey.result.csv">CSVå‡ºåŠ›</span>
        </button>
      </div>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 py-6 pb-24">
    <div class="bg-white rounded-lg shadow-sm p-6 mb-6 fade-in">
      <h2 class="text-2xl font-bold text-gray-900 mb-4" id="surveyTitle" data-i18n="home.survey.environment">ä½ç’°å¢ƒã«é–¢ã™ã‚‹ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</h2>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
        <div class="bg-blue-50 p-4 rounded-lg">
          <div class="text-3xl font-bold text-blue-600" id="responseCount">42</div>
          <div class="text-sm text-gray-600" data-i18n="survey.result.total">å›ç­”æ•°</div>
        </div>
        <div class="bg-green-50 p-4 rounded-lg">
          <div class="text-3xl font-bold text-green-600" id="responseRate">24.6%</div>
          <div class="text-sm text-gray-600" data-i18n="survey.result.rate">å›ç­”ç‡</div>
        </div>
        <div class="bg-purple-50 p-4 rounded-lg">
          <div class="text-3xl font-bold text-purple-600">171</div>
          <div class="text-sm text-gray-600" data-i18n="survey.result.total_residents">ç·ä¸–å¸¯æ•°</div>
        </div>
        <div class="bg-orange-50 p-4 rounded-lg">
          <div class="text-lg font-bold text-orange-600">10/20 - 10/27</div>
          <div class="text-sm text-gray-600" data-i18n="survey.result.period">å®Ÿæ–½æœŸé–“</div>
        </div>
      </div>

      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <p class="text-sm text-yellow-800">
          <span class="font-bold" data-i18n="survey.result.hint">ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</span> 
          <span data-i18n="survey.result.hint_msg">ã“ã®ç”»é¢ã‚’ç†äº‹ä¼šã§å…±æœ‰ã—ã€ä½æ°‘ã®å£°ã‚’å¯è¦–åŒ–ã§ãã¾ã™ã€‚CSVå‡ºåŠ›ã§è©³ç´°åˆ†æã‚‚å¯èƒ½ã§ã™ã€‚</span>
        </p>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 mb-6 fade-in">
      <h3 class="text-lg font-bold text-gray-900 mb-4">
        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm mr-2"><span data-i18n="survey.question">è³ªå•</span>1</span>
        <span data-i18n="survey.q1.text">é¨’éŸ³å•é¡Œã§å›°ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</span>
      </h3>

      <div class="space-y-3 mb-6">
        <div>
          <div class="flex items-center justify-between mb-1">
            <span class="text-gray-700 font-medium" data-i18n="survey.q1.opt.yes">ã¯ã„</span>
            <span class="text-gray-900 font-bold">15<span data-i18n="survey.result.unit">ä»¶</span>ï¼ˆ35.7%ï¼‰</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-8">
            <div class="percentage-bar" style="width: 35.7%">35.7%</div>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between mb-1">
            <span class="text-gray-700 font-medium" data-i18n="survey.q1.opt.no">ã„ã„ãˆ</span>
            <span class="text-gray-900 font-bold">20<span data-i18n="survey.result.unit">ä»¶</span>ï¼ˆ47.6%ï¼‰</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-8">
            <div class="percentage-bar" style="width: 47.6%; background-color: #10B981;">47.6%</div>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between mb-1">
            <span class="text-gray-700 font-medium" data-i18n="survey.q1.opt.neither">ã©ã¡ã‚‰ã§ã‚‚ãªã„</span>
            <span class="text-gray-900 font-bold">7<span data-i18n="survey.result.unit">ä»¶</span>ï¼ˆ16.7%ï¼‰</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-8">
            <div class="percentage-bar" style="width: 16.7%; background-color: #6B7280;">16.7%</div>
          </div>
        </div>
      </div>

      <div class="bg-red-50 border border-red-200 rounded-lg p-4">
        <p class="text-sm text-red-800">
          <span class="font-bold" data-i18n="survey.result.attention">âš ï¸ æ³¨ç›®:</span> 
          <span data-i18n="survey.result.attention_msg">35.7%ï¼ˆ15ä¸–å¸¯ï¼‰ãŒé¨’éŸ³å•é¡Œã§å›°ã£ã¦ã„ã‚‹ã¨å›ç­”ã€‚å¯¾ç­–ã®æ¤œè¨ãŒå¿…è¦ã§ã™ã€‚</span>
        </p>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 mb-6 fade-in">
      <h3 class="text-lg font-bold text-gray-900 mb-2">
        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm mr-2"><span data-i18n="survey.question">è³ªå•</span>2</span>
        <span data-i18n="survey.q2.text">ã©ã®æ™‚é–“å¸¯ã®é¨’éŸ³ãŒæ°—ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ</span>
      </h3>
      <p class="text-sm text-gray-600 mb-4" data-i18n="survey.multiple">ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</p>

      <div class="space-y-3 mb-6">
        <div>
          <div class="flex items-center justify-between mb-1">
            <span class="text-gray-700 font-medium" data-i18n="survey.q2.opt.morning">æ—©æœï¼ˆ6-9æ™‚ï¼‰</span>
            <span class="text-gray-900 font-bold">8<span data-i18n="survey.result.unit">ä»¶</span></span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-8">
            <div class="percentage-bar" style="width: 44.4%; background-color: #3B82F6;">44.4%</div>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between mb-1">
            <span class="text-gray-700 font-medium" data-i18n="survey.q2.opt.day">æ—¥ä¸­ï¼ˆ9-18æ™‚ï¼‰</span>
            <span class="text-gray-900 font-bold">12<span data-i18n="survey.result.unit">ä»¶</span></span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-8">
            <div class="percentage-bar" style="width: 66.7%; background-color: #3B82F6;">66.7%</div>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between mb-1">
            <span class="text-gray-700 font-medium" data-i18n="survey.q2.opt.evening">å¤œé–“ï¼ˆ18-22æ™‚ï¼‰</span>
            <span class="text-gray-900 font-bold">18<span data-i18n="survey.result.unit">ä»¶</span> ğŸ”¥</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-8">
            <div class="percentage-bar" style="width: 100%; background-color: #EF4444;">100%<span data-i18n="survey.result.max">ï¼ˆæœ€å¤šï¼‰</span></div>
          </div>
        </div>

        <div>
          <div class="flex items-center justify-between mb-1">
            <span class="text-gray-700 font-medium" data-i18n="survey.q2.opt.night">æ·±å¤œï¼ˆ22-6æ™‚ï¼‰</span>
            <span class="text-gray-900 font-bold">10<span data-i18n="survey.result.unit">ä»¶</span></span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-8">
            <div class="percentage-bar" style="width: 55.6%; background-color: #3B82F6;">55.6%</div>
          </div>
        </div>
      </div>

      <div class="bg-orange-50 border border-orange-200 rounded-lg p-4">
        <p class="text-sm text-orange-800">
          <span class="font-bold" data-i18n="survey.result.analysis">ğŸ“Š åˆ†æ:</span> 
          <span data-i18n="survey.result.analysis_msg">å¤œé–“ï¼ˆ18-22æ™‚ï¼‰ã®é¨’éŸ³ãŒæœ€ã‚‚å¤šãå ±å‘Šã•ã‚Œã¦ã„ã¾ã™ï¼ˆ18ä»¶ï¼‰ã€‚ã“ã®æ™‚é–“å¸¯ã®å¯¾ç­–ã‚’å„ªå…ˆã™ã¹ãã§ã™ã€‚</span>
        </p>
      </div>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 mb-6 fade-in">
      <h3 class="text-lg font-bold text-gray-900 mb-2">
        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm mr-2"><span data-i18n="survey.question">è³ªå•</span>3</span>
        <span data-i18n="survey.q3.text">ãã®ä»–ã€ã”æ„è¦‹ãŒã‚ã‚Œã°ãŠèã‹ã›ãã ã•ã„</span>
      </h3>
      <p class="text-sm text-gray-600 mb-4" data-i18n="survey.q3.free_response_14">è‡ªç”±è¨˜è¿°ï¼ˆ14ä»¶ã®å›ç­”ï¼‰</p>

      <div class="space-y-2 max-h-96 overflow-y-auto" id="freeTextResponses">
        </div>

      <button onclick="toggleAllResponses()" class="mt-4 w-full bg-gray-100 text-gray-700 py-2 rounded-lg hover:bg-gray-200 transition">
        <span data-i18n="survey.result.toggle">å…¨ã¦è¡¨ç¤º / æŠ˜ã‚ŠãŸãŸã‚€</span>
      </button>
    </div>

    <div class="bg-white rounded-lg shadow-sm p-6 fade-in">
      <h3 class="text-lg font-bold text-gray-900 mb-4" data-i18n="survey.result.breakdown">å›ç­”è€…ã®å†…è¨³</h3>
      <div class="grid grid-cols-2 gap-4">
        <div class="bg-blue-50 p-4 rounded-lg text-center">
          <div class="text-2xl font-bold text-blue-600">18<span class="text-lg" data-i18n="survey.result.unit">ä»¶</span></div>
          <div class="text-sm text-gray-600" data-i18n="survey.named">å®Ÿåå›ç­”</div>
        </div>
        <div class="bg-purple-50 p-4 rounded-lg text-center">
          <div class="text-2xl font-bold text-purple-600">24<span class="text-lg" data-i18n="survey.result.unit">ä»¶</span></div>
          <div class="text-sm text-gray-600" data-i18n="survey.anonymous">åŒ¿åå›ç­”</div>
        </div>
      </div>
      <p class="text-xs text-gray-500 mt-4 text-center">
        <span data-i18n="survey.result.last_updated">æœ€çµ‚æ›´æ–°</span>: 2025/10/22 15:32
      </p>
    </div>
  </main>
  <script>
    class EmbeddedLanguageManager {
      constructor() {
        this.currentLanguage = localStorage.getItem('language') || 'ja';
        this.translations = window.i18nData;
        this.dynamicHooks = []; // â˜…å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç”¨ã®ãƒ•ãƒƒã‚¯
      }
      
      setLanguage(lang) {
        if (this.translations[lang]) {
          this.currentLanguage = lang;
          localStorage.setItem('language', lang);
          this.updatePage();
          this.updateLanguageButtons();
          
          // --- â˜…ç™»éŒ²ã•ã‚ŒãŸãƒ•ãƒƒã‚¯ã‚’ã™ã¹ã¦å®Ÿè¡Œâ˜… ---
          this.dynamicHooks.forEach(hook => hook());
        }
      }
      
      translate(key) {
        const translation = this.translations[this.currentLanguage];
        return translation && translation[key] ? translation[key] : key;
      }
      
      updatePage() {
        document.querySelectorAll('[data-i18n]').forEach(element => {
          const key = element.getAttribute('data-i18n');
          const translation = this.translate(key);
          
          if (element.children.length === 0) {
            element.textContent = translation;
          } else {
            for (let node of element.childNodes) {
              if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
                node.textContent = translation;
                break;
              }
            }
          }
        });

        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
          const key = element.getAttribute('data-i18n-placeholder');
          element.placeholder = this.translate(key);
        });
        
        const titleElement = document.querySelector('title');
        if (titleElement && titleElement.hasAttribute('data-i18n')) {
          const key = titleElement.getAttribute('data-i18n');
          document.title = this.translate(key);
        }
      }
      
      updateLanguageButtons() {
        document.querySelectorAll('.lang-btn').forEach(btn => {
          const lang = btn.getAttribute('data-lang');
          if (lang === this.currentLanguage) {
            btn.classList.add('active');
            btn.classList.remove('inactive');
          } else {
            btn.classList.remove('active');
            btn.classList.add('inactive');
          }
        });
      }
      
      init() {
        document.querySelectorAll('.lang-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const lang = btn.getAttribute('data-lang'); // â˜…ä¿®æ­£æ¸ˆâ˜…
            this.setLanguage(lang);
          });
        });
      }
    }
    
    window.languageManager = new EmbeddedLanguageManager();
    window.i18n = function(key) {
      return window.languageManager.translate(key);
    };
  </script>

  <script>
    // â–¼ è‡ªç”±è¨˜è¿°ã®å›ç­”ã‚’ã€Œã‚­ãƒ¼ã€ã®é…åˆ—ã¨ã—ã¦å®šç¾©
    const responseKeys = [
      'survey.q3.res.1', 'survey.q3.res.3', 'survey.q3.res.4',
      'survey.q3.res.5', 'survey.q3.res.6', 'survey.q3.res.7', 'survey.q3.res.8',
      'survey.q3.res.9', 'survey.q3.res.10', 'survey.q3.res.11', 'survey.q3.res.12',
      'survey.q3.res.13', 'survey.q3.res.14', 'survey.q3.res.15'
    ];
    
    const container = document.getElementById('freeTextResponses');
    let showingAll = false;

    // â–¼ renderResponses() ã‚’ä¿®æ­£ (ã‚­ãƒ¼ã‚’ç¿»è¨³ã™ã‚‹ã‚ˆã†ã«)
    function renderResponses(showAll = false) {
      if (!container) return; // è¦ç´ ãƒã‚§ãƒƒã‚¯
      container.innerHTML = '';
      const displayKeys = showAll ? responseKeys : responseKeys.slice(0, 5);
      
      displayKeys.forEach((key, index) => {
        const responseText = window.i18n(key); // â˜…ç¿»è¨³â˜…
        
        const div = document.createElement('div');
        div.className = 'bg-gray-50 p-3 rounded-lg border border-gray-200';
        div.innerHTML = `
          <div class="flex items-start gap-2">
            <span class="text-gray-400 text-sm">${index + 1}.</span>
            <p class="text-gray-700 text-sm">${responseText}</p>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function toggleAllResponses() {
      showingAll = !showingAll;
      renderResponses(showingAll); // â˜…ç¿»è¨³ã•ã‚ŒãŸå†…å®¹ã§å†æç”»
    }

    // CSVå‡ºåŠ›ï¼ˆãƒ‡ãƒ¢ï¼‰
    function exportCSV() {
      alert(window.i18n('alert.csv_export_demo'));
    }

    // DOMèª­ã¿è¾¼ã¿å®Œäº†æ™‚ã«ã€ç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–ã¨å‹•çš„ãƒ•ãƒƒã‚¯ã®ç™»éŒ²
    document.addEventListener('DOMContentLoaded', function() {
      // ç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ ã‚’ã‚­ãƒƒã‚¯
      window.languageManager.init();
      window.languageManager.updatePage(); // é™çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®åˆå›ç¿»è¨³
      window.languageManager.updateLanguageButtons(); // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°

      // â˜…è‡ªç”±è¨˜è¿°æ¬„ã®æç”»ã‚’å‹•çš„ãƒ•ãƒƒã‚¯ã«ç™»éŒ²
      // (renderResponses ã¯ showingAll ã®çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€
      //  è¨€èªãŒåˆ‡ã‚Šæ›¿ã‚ã£ãŸéš›ã¯ showingAll ã®çŠ¶æ…‹ã‚’ç¶­æŒã—ãŸã¾ã¾å†æç”»ã™ã‚‹)
      window.languageManager.dynamicHooks.push(() => renderResponses(showingAll));
      
      // â˜…ãƒªã‚¹ãƒˆã®åˆå›æç”»
      renderResponses(false);
    });
  </script>
  </body>
</html>