<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="booking.title">æ–½è¨­äºˆç´„ - ã‚»ã‚­ãƒ¥ãƒ¬ã‚¢ã‚·ãƒ†ã‚£</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/custom.css">
  
  <script>
    window.i18nData = {
      ja: {
        'home': 'ãƒ›ãƒ¼ãƒ ', 'board': 'æ²ç¤ºæ¿', 'booking': 'äºˆç´„', 'mypage': 'ãƒã‚¤ãƒšãƒ¼ã‚¸',
        'booking.title': 'æ–½è¨­äºˆç´„', 'booking.hall': 'é›†ä¼šæ‰€', 'booking.parking': 'ã‚²ã‚¹ãƒˆé§è»Šå ´',
        'booking.hall.name': 'ğŸ“Œ é›†ä¼šæ‰€ï¼ˆã‚»ã‚­ãƒ¥ãƒ¬ã‚¢ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰',
        'booking.hall.hours': 'â€¢ ä½¿ç”¨æ™‚é–“ï¼š9:00-19:00ï¼ˆ30åˆ†å˜ä½ï¼‰', 'booking.hall.fee': 'â€¢ ä½¿ç”¨æ–™ï¼šç„¡æ–™',
        'booking.hall.capacity': 'â€¢ å®šå“¡ï¼šç´„30å', 'booking.hall.equipment': 'â€¢ è¨­å‚™ï¼šãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»æ¤…å­ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ã‚¿ãƒ¼',
        'booking.month': 'æœˆ',
        'booking.day.sun': 'æ—¥', 'booking.day.mon': 'æœˆ', 'booking.day.tue': 'ç«',
        'booking.day.wed': 'æ°´', 'booking.day.thu': 'æœ¨', 'booking.day.fri': 'é‡‘', 'booking.day.sat': 'åœŸ',
        'booking.available': 'ç©ºã', 'booking.reserved': 'äºˆç´„æ¸ˆã¿', 'booking.myreservation': 'è‡ªåˆ†ã®äºˆç´„',
        'booking.parking.name': 'ğŸš— ã‚²ã‚¹ãƒˆé§è»Šå ´', 'booking.parking.count': 'â€¢ å°æ•°ï¼š8å°ï¼ˆâ‘ ã€œâ‘§ç•ªï¼‰',
        'booking.parking.hours': 'â€¢ ä½¿ç”¨æ™‚é–“ï¼š24æ™‚é–“', 'booking.parking.fee': 'â€¢ ä½¿ç”¨æ–™ï¼šç„¡æ–™',
        'booking.parking.advance': 'â€¢ äºˆç´„ï¼š2é€±é–“å‰ã‹ã‚‰å¯èƒ½', 'booking.parking.layout': 'é§è»Šå ´é…ç½®å›³',
        'booking.parking.layout.north': 'ã¤ãã°å¸‚å­¦åœ’ã®æ£®ç¾©å‹™æ•™è‚²å­¦æ ¡æ–¹é¢',
        'booking.parking.layout.center': 'é›†ä¼šæ‰€', 'booking.parking.layout.center_sub': 'ã‚»ã‚­ãƒ¥ãƒ¬ã‚¢ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³',
        'booking.parking.layout.south': 'ç ”ç©¶å­¦åœ’é§…æ–¹é¢', 'booking.parking.spot': 'ç•ª',
        'booking.parking.select_date': 'é¸æŠã—ãŸæ—¥ä»˜ï¼š',
        'alert.agree_required': 'æ³¨æ„äº‹é …ã«åŒæ„ã—ã¦ãã ã•ã„', 'alert.purpose_required': 'ä½¿ç”¨ç›®çš„ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
        'alert.booking_complete': 'äºˆç´„ãŒå®Œäº†ã—ã¾ã—ãŸï¼\n\näºˆç´„å†…å®¹ã‚’ç¢ºèªãƒ¡ãƒ¼ãƒ«ã§é€ä¿¡ã—ã¾ã—ãŸã€‚\nï¼ˆå®Ÿé‹ç”¨ç‰ˆã®æ©Ÿèƒ½ï¼‰'
      },
      en: {
        'home': 'Home', 'board': 'Board', 'booking': 'Booking', 'mypage': 'My Page',
        'booking.title': 'Facility Booking', 'booking.hall': 'Meeting Room', 'booking.parking': 'Guest Parking',
        'booking.hall.name': 'ğŸ“Œ Meeting Room (SECUREA Station)',
        'booking.hall.hours': 'â€¢ Hours: 9:00-19:00 (30min units)', 'booking.hall.fee': 'â€¢ Fee: Free',
        'booking.hall.capacity': 'â€¢ Capacity: About 30 people', 'booking.hall.equipment': 'â€¢ Equipment: Tables, Chairs, Projector',
        'booking.month': '',
        'booking.day.sun': 'Sun', 'booking.day.mon': 'Mon', 'booking.day.tue': 'Tue',
        'booking.day.wed': 'Wed', 'booking.day.thu': 'Thu', 'booking.day.fri': 'Fri', 'booking.day.sat': 'Sat',
        'booking.available': 'Available', 'booking.reserved': 'Reserved', 'booking.myreservation': 'My Reservation',
        'booking.parking.name': 'ğŸš— Guest Parking', 'booking.parking.count': 'â€¢ Spaces: 8 (â‘ -â‘§)',
        'booking.parking.hours': 'â€¢ Hours: 24 hours', 'booking.parking.fee': 'â€¢ Fee: Free',
        'booking.parking.advance': 'â€¢ Booking: 2 weeks in advance', 'booking.parking.layout': 'Parking Layout',
        'booking.parking.layout.north': 'Towards Gakuen no Mori Gimu Kyoiku Gakko',
        'booking.parking.layout.center': 'Meeting Room', 'booking.parking.layout.center_sub': 'SECUREA Station',
        'booking.parking.layout.south': 'Towards Kenkyu-gakuen Station', 'booking.parking.spot': '',
        'booking.parking.select_date': 'Selected Date: ',
        'alert.agree_required': 'Please agree to the terms and conditions', 'alert.purpose_required': 'Please enter the purpose of use',
        'alert.booking_complete': 'Booking completed!\n\nA confirmation email has been sent.\n(Live version feature)'
      },
      zh: {
        'home': 'é¦–é¡µ', 'board': 'ç•™è¨€æ¿', 'booking': 'é¢„çº¦', 'mypage': 'æˆ‘çš„',
        'booking.title': 'è®¾æ–½é¢„çº¦', 'booking.hall': 'ä¼šè®®å®¤', 'booking.parking': 'è®¿å®¢åœè½¦åœº',
        'booking.hall.name': 'ğŸ“Œ ä¼šè®®å®¤ï¼ˆSECUREA Stationï¼‰',
        'booking.hall.hours': 'â€¢ ä½¿ç”¨æ—¶é—´ï¼š9:00-19:00ï¼ˆ30åˆ†é’Ÿå•ä½ï¼‰', 'booking.hall.fee': 'â€¢ ä½¿ç”¨è´¹ï¼šå…è´¹',
        'booking.hall.capacity': 'â€¢ å®¹é‡ï¼šçº¦30äºº', 'booking.hall.equipment': 'â€¢ è®¾å¤‡ï¼šæ¡Œå­ã€æ¤…å­ã€æŠ•å½±ä»ª',
        'booking.month': 'æœˆ',
        'booking.day.sun': 'æ—¥', 'booking.day.mon': 'ä¸€', 'booking.day.tue': 'äºŒ',
        'booking.day.wed': 'ä¸‰', 'booking.day.thu': 'å››', 'booking.day.fri': 'äº”', 'booking.day.sat': 'å…­',
        'booking.available': 'ç©ºé—²', 'booking.reserved': 'å·²é¢„çº¦', 'booking.myreservation': 'æˆ‘çš„é¢„çº¦',
        'booking.parking.name': 'ğŸš— è®¿å®¢åœè½¦åœº', 'booking.parking.count': 'â€¢ æ•°é‡ï¼š8ä¸ªï¼ˆâ‘ ï½â‘§å·ï¼‰',
        'booking.parking.hours': 'â€¢ ä½¿ç”¨æ—¶é—´ï¼š24å°æ—¶', 'booking.parking.fee': 'â€¢ ä½¿ç”¨è´¹ï¼šå…è´¹',
        'booking.parking.advance': 'â€¢ é¢„çº¦ï¼šå¯æå‰2å‘¨', 'booking.parking.layout': 'åœè½¦åœºå¸ƒå±€å›¾',
        'booking.parking.layout.north': 'å¾€å­¦å›­ä¹‹æ£®ä¹‰åŠ¡æ•™è‚²å­¦æ ¡æ–¹å‘',
        'booking.parking.layout.center': 'ä¼šè®®å®¤', 'booking.parking.layout.center_sub': 'SECUREA Station',
        'booking.parking.layout.south': 'å¾€ç ”ç©¶å­¦å›­ç«™æ–¹å‘', 'booking.parking.spot': 'å·',
        'booking.parking.select_date': 'é€‰æ‹©çš„æ—¥æœŸï¼š',
        'alert.agree_required': 'è¯·åŒæ„æ³¨æ„äº‹é¡¹', 'alert.purpose_required': 'è¯·è¾“å…¥ä½¿ç”¨ç›®çš„',
        'alert.booking_complete': 'é¢„çº¦å·²å®Œæˆï¼\n\né¢„çº¦å†…å®¹çš„ç¡®è®¤é‚®ä»¶å·²å‘é€ã€‚\nï¼ˆå®é™…è¿è¥ç‰ˆåŠŸèƒ½ï¼‰'
      }
    };
  </script>
</head>
<body class="bg-gray-50">
  <!-- è¨€èªåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
  <div class="fixed top-4 right-4 language-switcher z-50 shadow-lg">
    <button class="lang-btn" data-lang="ja">JA</button>
    <button class="lang-btn" data-lang="en">EN</button>
    <button class="lang-btn" data-lang="zh">ZH</button>
  </div>

  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <header class="bg-white shadow-sm">
    <div class="max-w-4xl mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <button onclick="window.location.href='home.html'" class="text-gray-600 hover:text-gray-900">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
          </button>
          <h1 class="text-xl font-bold text-gray-900" data-i18n="booking.title">æ–½è¨­äºˆç´„</h1>
        </div>
      </div>
    </div>
  </header>

  <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
  <main class="max-w-4xl mx-auto px-4 py-6 pb-32">
    <!-- æ–½è¨­é¸æŠã‚¿ãƒ– -->
    <div class="bg-white rounded-lg shadow-sm p-4 mb-6 fade-in">
      <div class="flex gap-2 overflow-x-auto">
        <button onclick="selectFacility('hall')" id="facility-hall" 
          class="px-6 py-3 rounded-lg bg-blue-600 text-white font-bold whitespace-nowrap flex items-center gap-2">
          ğŸ  <span data-i18n="booking.hall">é›†ä¼šæ‰€</span>
        </button>
        <button onclick="selectFacility('parking')" id="facility-parking" 
          class="px-6 py-3 rounded-lg bg-gray-100 text-gray-700 font-bold whitespace-nowrap flex items-center gap-2">
          ğŸš— <span data-i18n="booking.parking">ã‚²ã‚¹ãƒˆé§è»Šå ´</span>
        </button>
      </div>
    </div>

    <!-- é›†ä¼šæ‰€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div id="hall-section" class="space-y-6">
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 fade-in">
        <h3 class="font-bold text-blue-900 mb-2" data-i18n="booking.hall.name">ğŸ“Œ é›†ä¼šæ‰€ï¼ˆã‚»ã‚­ãƒ¥ãƒ¬ã‚¢ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰</h3>
        <ul class="text-sm text-blue-800 space-y-1">
          <li data-i18n="booking.hall.hours">â€¢ ä½¿ç”¨æ™‚é–“ï¼š9:00-19:00ï¼ˆ30åˆ†å˜ä½ï¼‰</li>
          <li data-i18n="booking.hall.fee">â€¢ ä½¿ç”¨æ–™ï¼šç„¡æ–™</li>
          <li data-i18n="booking.hall.capacity">â€¢ å®šå“¡ï¼šç´„30å</li>
          <li data-i18n="booking.hall.equipment">â€¢ è¨­å‚™ï¼šãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»æ¤…å­ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ã‚¿ãƒ¼</li>
        </ul>
      </div>
      
      <div class="bg-white rounded-lg shadow-sm p-6 fade-in">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-bold text-gray-900" id="calendar-month">2025å¹´10æœˆ</h3>
          <div class="flex gap-2">
            <button class="p-2 hover:bg-gray-100 rounded-lg">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
            </button>
            <button class="p-2 hover:bg-gray-100 rounded-lg">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="grid grid-cols-7 gap-2 mb-4" id="calendar-weekdays"></div>
        <div class="grid grid-cols-7 gap-2" id="calendar-grid"></div>
        <div class="mt-6 flex items-center gap-4 text-sm">
          <div class="flex items-center gap-2">
            <div class="w-4 h-4 bg-green-100 border border-green-500 rounded"></div>
            <span class="text-gray-600" data-i18n="booking.available">ç©ºã</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-4 h-4 bg-gray-200 border border-gray-400 rounded"></div>
            <span class="text-gray-600" data-i18n="booking.reserved">äºˆç´„æ¸ˆã¿</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-4 h-4 bg-blue-100 border border-blue-500 rounded"></div>
            <span class="text-gray-600" data-i18n="booking.myreservation">è‡ªåˆ†ã®äºˆç´„</span>
          </div>
        </div>
      </div>
    </div>

    <!-- é§è»Šå ´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¿½åŠ ç‰ˆï¼‰ -->
    <div id="parking-section" class="space-y-6 hidden">
      <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 fade-in">
        <h3 class="font-bold text-purple-900 mb-2" data-i18n="booking.parking.name">ğŸš— ã‚²ã‚¹ãƒˆé§è»Šå ´</h3>
        <ul class="text-sm text-purple-800 space-y-1">
          <li data-i18n="booking.parking.count">â€¢ å°æ•°ï¼š8å°ï¼ˆâ‘ ã€œâ‘§ç•ªï¼‰</li>
          <li data-i18n="booking.parking.hours">â€¢ ä½¿ç”¨æ™‚é–“ï¼š24æ™‚é–“</li>
          <li data-i18n="booking.parking.fee">â€¢ ä½¿ç”¨æ–™ï¼šç„¡æ–™</li>
          <li data-i18n="booking.parking.advance">â€¢ äºˆç´„ï¼š2é€±é–“å‰ã‹ã‚‰å¯èƒ½</li>
        </ul>
      </div>
      
      <!-- é§è»Šå ´ç”¨ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
      <div class="bg-white rounded-lg shadow-sm p-6 fade-in">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-bold text-gray-900" id="parking-calendar-month">2025å¹´10æœˆ</h3>
          <div class="flex gap-2">
            <button class="p-2 hover:bg-gray-100 rounded-lg">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
              </svg>
            </button>
            <button class="p-2 hover:bg-gray-100 rounded-lg">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="grid grid-cols-7 gap-2 mb-4" id="parking-calendar-weekdays"></div>
        <div class="grid grid-cols-7 gap-2" id="parking-calendar-grid"></div>
        <div class="mt-6 flex items-center gap-4 text-sm">
          <div class="flex items-center gap-2">
            <div class="w-4 h-4 bg-green-100 border border-green-500 rounded"></div>
            <span class="text-gray-600" data-i18n="booking.available">ç©ºã</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-4 h-4 bg-gray-200 border border-gray-400 rounded"></div>
            <span class="text-gray-600" data-i18n="booking.reserved">äºˆç´„æ¸ˆã¿</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-4 h-4 bg-blue-100 border border-blue-500 rounded"></div>
            <span class="text-gray-600" data-i18n="booking.myreservation">è‡ªåˆ†ã®äºˆç´„</span>
          </div>
        </div>
      </div>
      
      <!-- é§è»Šå ´é¸æŠã‚¨ãƒªã‚¢ï¼ˆæ—¥ä»˜é¸æŠå¾Œã«è¡¨ç¤ºï¼‰ -->
      <div id="parking-selection" class="bg-white rounded-lg shadow-sm p-6 fade-in hidden">
        <h3 class="text-lg font-bold text-gray-900 mb-4">
          <span data-i18n="booking.parking.select_date">é¸æŠã—ãŸæ—¥ä»˜ï¼š</span>
          <span id="selected-date-display" class="text-blue-600 ml-2">2025å¹´10æœˆ25æ—¥</span>
        </h3>
        
        <div class="bg-gray-100 p-4 rounded-lg mb-4">
          <h4 class="text-sm font-bold text-gray-700 mb-3" data-i18n="booking.parking.layout">é§è»Šå ´é…ç½®å›³</h4>
          <div class="text-center mb-3 text-xs text-gray-600" data-i18n="booking.parking.layout.north">ã¤ãã°å¸‚å­¦åœ’ã®æ£®ç¾©å‹™æ•™è‚²å­¦æ ¡æ–¹é¢</div>
          <div class="space-y-3">
            <div class="flex justify-center gap-3">
              <div class="bg-blue-400 text-white p-3 rounded text-center text-sm font-bold w-16">â‘¡</div>
              <div class="bg-blue-400 text-white p-3 rounded text-center text-sm font-bold w-16">â‘ </div>
            </div>
            <div class="bg-orange-100 border border-orange-300 p-4 rounded text-center">
              <div class="font-bold text-gray-900 text-sm" data-i18n="booking.parking.layout.center">é›†ä¼šæ‰€</div>
            </div>
            <div class="flex justify-center gap-3">
              <div class="bg-blue-400 text-white p-3 rounded text-center text-sm font-bold w-16">â‘¥</div>
              <div class="bg-blue-400 text-white p-3 rounded text-center text-sm font-bold w-16">â‘¤</div>
              <div class="bg-blue-400 text-white p-3 rounded text-center text-sm font-bold w-16">â‘£</div>
            </div>
            <div class="flex justify-center gap-3">
              <div class="bg-blue-400 text-white p-3 rounded text-center text-sm font-bold w-16">â‘§</div>
              <div class="bg-blue-400 text-white p-3 rounded text-center text-sm font-bold w-16">â‘¦</div>
            </div>
          </div>
          <div class="text-center mt-3 text-xs text-gray-600" data-i18n="booking.parking.layout.south">ç ”ç©¶å­¦åœ’é§…æ–¹é¢</div>
        </div>
        
        <div class="grid grid-cols-4 gap-3" id="parking-spots"></div>
      </div>
    </div>
  </main>

  <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
  <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg">
    <div class="max-w-4xl mx-auto px-4">
      <div class="flex justify-around py-3">
        <a href="home.html" class="flex flex-col items-center text-gray-500">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/>
          </svg>
          <span class="text-xs mt-1" data-i18n="home">ãƒ›ãƒ¼ãƒ </span>
        </a>
        <a href="board.html" class="flex flex-col items-center text-gray-500">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
          </svg>
          <span class="text-xs mt-1" data-i18n="board">æ²ç¤ºæ¿</span>
        </a>
        <a href="booking.html" class="flex flex-col items-center text-blue-600">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
          </svg>
          <span class="text-xs mt-1 font-bold" data-i18n="booking">äºˆç´„</span>
        </a>
        <a href="mypage.html" class="flex flex-col items-center text-gray-500">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
          </svg>
          <span class="text-xs mt-1" data-i18n="mypage">ãƒã‚¤ãƒšãƒ¼ã‚¸</span>
        </a>
      </div>
    </div>
  </nav>

  <!-- è¨€èªç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆãƒŸãƒ‹ãƒ•ã‚¡ã‚¤ç‰ˆï¼‰ -->
  <script>
    class EmbeddedLanguageManager{constructor(){this.currentLanguage=localStorage.getItem('language')||'ja';this.translations=window.i18nData;this.dynamicHooks=[]}setLanguage(a){if(this.translations[a]){this.currentLanguage=a;localStorage.setItem('language',a);this.updatePage();this.updateLanguageButtons();this.dynamicHooks.forEach(b=>b())}}translate(a){const b=this.translations[this.currentLanguage];return b&&b[a]?b[a]:a}updatePage(){document.querySelectorAll('[data-i18n]').forEach(a=>{const b=a.getAttribute('data-i18n'),c=this.translate(b);if(a.children.length===0)a.textContent=c;else for(let d of a.childNodes)if(d.nodeType===Node.TEXT_NODE&&d.textContent.trim()){d.textContent=c;break}});document.querySelectorAll('[data-i18n-placeholder]').forEach(a=>{const b=a.getAttribute('data-i18n-placeholder');a.placeholder=this.translate(b)});const a=document.querySelector('title[data-i18n]');if(a){const b=a.getAttribute('data-i18n');document.title=this.translate(b)}}updateLanguageButtons(){document.querySelectorAll('.lang-btn').forEach(a=>{const b=a.getAttribute('data-lang');a.classList.toggle('active',b===this.currentLanguage);a.classList.toggle('inactive',b!==this.currentLanguage)})}init(){document.querySelectorAll('.lang-btn').forEach(a=>{a.addEventListener('click',()=>{const b=a.getAttribute('data-lang');this.setLanguage(b)})})}getCurrentLanguage(){return this.currentLanguage}}
    window.languageManager = new EmbeddedLanguageManager();
    window.i18n = function(key) { return window.languageManager.translate(key); };
  </script>
  
  <!-- ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script>
    let selectedParkingDate = null; // é¸æŠã•ã‚ŒãŸé§è»Šå ´ã®æ—¥ä»˜

    // æ–½è¨­é¸æŠ
    function selectFacility(facility) {
      const hallButton = document.getElementById('facility-hall');
      const parkingButton = document.getElementById('facility-parking');
      const hallSection = document.getElementById('hall-section');
      const parkingSection = document.getElementById('parking-section');

      if (!hallButton || !parkingButton || !hallSection || !parkingSection) {
          console.error("Error: Could not find one or more elements!");
          return; 
      }

      // ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ãƒªã‚»ãƒƒãƒˆ
      hallButton.className = 'px-6 py-3 rounded-lg bg-gray-100 text-gray-700 font-bold whitespace-nowrap flex items-center gap-2';
      parkingButton.className = 'px-6 py-3 rounded-lg bg-gray-100 text-gray-700 font-bold whitespace-nowrap flex items-center gap-2';
      
      // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
      document.getElementById('facility-' + facility).className = 'px-6 py-3 rounded-lg bg-blue-600 text-white font-bold whitespace-nowrap flex items-center gap-2';
      
      // ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
      if (facility === 'hall') {
        hallSection.classList.remove('hidden');
        parkingSection.classList.add('hidden');
        // é§è»Šå ´é¸æŠã‚¨ãƒªã‚¢ã‚’éè¡¨ç¤º
        document.getElementById('parking-selection').classList.add('hidden');
      } else {
        hallSection.classList.add('hidden');
        parkingSection.classList.remove('hidden');
      }
      
      hallSection.style.display = hallSection.classList.contains('hidden') ? 'none' : ''; 
      parkingSection.style.display = parkingSection.classList.contains('hidden') ? 'none' : '';
    }

    // é›†ä¼šæ‰€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”Ÿæˆ
    function generateCalendar() {
        const grid = document.getElementById('calendar-grid');
        const weekdaysContainer = document.getElementById('calendar-weekdays');
        const monthLabel = document.getElementById('calendar-month');
        
        if (!grid || !weekdaysContainer || !monthLabel) return;
        
        grid.innerHTML = '';
        weekdaysContainer.innerHTML = '';
        
        const today = 20;
        const year = 2025;
        const month = 10;
        const currentLang = window.languageManager.getCurrentLanguage();
        
        // æœˆè¡¨ç¤º
        let monthText = '';
        if (currentLang === 'en') {
            const date = new Date(year, month - 1);
            monthText = date.toLocaleString('en-US', { month: 'long', year: 'numeric' });
        } else if (currentLang === 'zh') {
            monthText = `${year}å¹´${month}æœˆ`;
        } else {
            monthText = `${year}å¹´${month}æœˆ`;
        }
        monthLabel.textContent = monthText;
        
        // æ›œæ—¥ãƒ˜ãƒƒãƒ€ãƒ¼
        const weekdays = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
        weekdays.forEach(dayKey => {
            const dayName = window.i18n(`booking.day.${dayKey}`);
            const div = document.createElement('div');
            div.className = 'text-center text-sm font-bold text-gray-600';
            div.textContent = dayName;
            weekdaysContainer.appendChild(div);
        });
        
        // LocalStorageã‹ã‚‰äºˆç´„ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        const bookingsJson = localStorage.getItem('bookings');
        const bookings = bookingsJson ? JSON.parse(bookingsJson) : [];
        
        // è‡ªåˆ†ã®äºˆç´„ã‚’æ—¥ä»˜ã§ãƒãƒƒãƒ”ãƒ³ã‚°
        const myBookings = {};
        bookings.forEach(booking => {
            if (booking.facility === 'hall' && booking.status === 'active') {
                const day = parseInt(booking.date.split('-')[2]);
                myBookings[day] = booking;
            }
        });
        
        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”Ÿæˆ
        for (let i = 1; i <= 31; i++) {
            const day = document.createElement('button');
            day.className = 'aspect-square p-2 rounded-lg text-sm font-bold transition';
            
            if (i < today) {
                day.className += ' bg-gray-100 text-gray-400 cursor-not-allowed';
            } else if (myBookings[i]) {
                day.className += ' bg-blue-100 border-2 border-blue-500 text-blue-900 hover:bg-blue-200';
                day.onclick = () => window.location.href = `booking-detail.html?id=${myBookings[i].id}`;
            } else if ([19, 26].includes(i)) {
                day.className += ' bg-gray-200 border-2 border-gray-400 text-gray-600 cursor-not-allowed';
            } else {
                day.className += ' bg-green-100 border-2 border-green-500 text-green-900 hover:bg-green-200';
                day.onclick = () => window.location.href = 'booking-confirm.html?date=2025-10-' + String(i).padStart(2, '0') + '&facility=hall';
            }
            
            day.textContent = i;
            grid.appendChild(day);
        }
    }

    // é§è»Šå ´ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”Ÿæˆ
    function generateParkingCalendar() {
        const grid = document.getElementById('parking-calendar-grid');
        const weekdaysContainer = document.getElementById('parking-calendar-weekdays');
        const monthLabel = document.getElementById('parking-calendar-month');
        
        if (!grid || !weekdaysContainer || !monthLabel) return;
        
        grid.innerHTML = '';
        weekdaysContainer.innerHTML = '';
        
        const today = 20;
        const year = 2025;
        const month = 10;
        const currentLang = window.languageManager.getCurrentLanguage();
        
        // æœˆè¡¨ç¤º
        let monthText = '';
        if (currentLang === 'en') {
            const date = new Date(year, month - 1);
            monthText = date.toLocaleString('en-US', { month: 'long', year: 'numeric' });
        } else if (currentLang === 'zh') {
            monthText = `${year}å¹´${month}æœˆ`;
        } else {
            monthText = `${year}å¹´${month}æœˆ`;
        }
        monthLabel.textContent = monthText;
        
        // æ›œæ—¥ãƒ˜ãƒƒãƒ€ãƒ¼
        const weekdays = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
        weekdays.forEach(dayKey => {
            const dayName = window.i18n(`booking.day.${dayKey}`);
            const div = document.createElement('div');
            div.className = 'text-center text-sm font-bold text-gray-600';
            div.textContent = dayName;
            weekdaysContainer.appendChild(div);
        });
        
        // LocalStorageã‹ã‚‰äºˆç´„ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        const bookingsJson = localStorage.getItem('bookings');
        const bookings = bookingsJson ? JSON.parse(bookingsJson) : [];
        
        // é§è»Šå ´ã®äºˆç´„ã‚’æ—¥ä»˜ã§ãƒãƒƒãƒ”ãƒ³ã‚°
        const myParkingBookings = {};
        const allParkingBookings = {};
        bookings.forEach(booking => {
            if (booking.facility === 'parking' && booking.status === 'active') {
                const day = parseInt(booking.date.split('-')[2]);
                if (!allParkingBookings[day]) allParkingBookings[day] = [];
                allParkingBookings[day].push(booking);
                
                // è‡ªåˆ†ã®äºˆç´„ã‹ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ‡ãƒ¢ã§ã¯å…¨éƒ¨è‡ªåˆ†ã®äºˆç´„ï¼‰
                myParkingBookings[day] = booking;
            }
        });
        
        // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç”Ÿæˆ
        for (let i = 1; i <= 31; i++) {
            const day = document.createElement('button');
            day.className = 'aspect-square p-2 rounded-lg text-sm font-bold transition';
            
            if (i < today) {
                // éå»ã®æ—¥ä»˜
                day.className += ' bg-gray-100 text-gray-400 cursor-not-allowed';
            } else if (myParkingBookings[i]) {
                // è‡ªåˆ†ã®äºˆç´„ï¼ˆé’è‰²ï¼‰â†’ äºˆç´„è©³ç´°ç”»é¢ã¸
                day.className += ' bg-blue-100 border-2 border-blue-500 text-blue-900 hover:bg-blue-200';
                day.onclick = () => window.location.href = `booking-detail.html?id=${myParkingBookings[i].id}`;
            } else if (allParkingBookings[i] && allParkingBookings[i].length >= 8) {
                // æº€è»Šï¼ˆä»–ã®äººã®äºˆç´„ã§å…¨ã¦åŸ‹ã¾ã£ã¦ã„ã‚‹ï¼‰
                day.className += ' bg-gray-200 border-2 border-gray-400 text-gray-600 cursor-not-allowed';
            } else {
                // ç©ºãã‚ã‚Šï¼ˆç·‘è‰²ï¼‰â†’ é§è»Šå ´é¸æŠç”»é¢ã‚’è¡¨ç¤º
                day.className += ' bg-green-100 border-2 border-green-500 text-green-900 hover:bg-green-200';
                day.onclick = () => selectParkingDate(year, month, i);
            }
            
            day.textContent = i;
            grid.appendChild(day);
        }
    }

    // é§è»Šå ´ã®æ—¥ä»˜ã‚’é¸æŠ
    function selectParkingDate(year, month, day) {
        selectedParkingDate = `${year}-${String(month).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        
        // é¸æŠã—ãŸæ—¥ä»˜ã‚’è¡¨ç¤º
        const currentLang = window.languageManager.getCurrentLanguage();
        let dateText = '';
        if (currentLang === 'en') {
            const date = new Date(year, month - 1, day);
            dateText = date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
        } else if (currentLang === 'zh') {
            dateText = `${year}å¹´${month}æœˆ${day}æ—¥`;
        } else {
            dateText = `${year}å¹´${month}æœˆ${day}æ—¥`;
        }
        document.getElementById('selected-date-display').textContent = dateText;
        
        // é§è»Šå ´é¸æŠã‚¨ãƒªã‚¢ã‚’è¡¨ç¤º
        document.getElementById('parking-selection').classList.remove('hidden');
        
        // é§è»Šå ´ã‚¹ãƒãƒƒãƒˆã‚’ç”Ÿæˆ
        generateParkingSpots();
        
        // é§è»Šå ´é¸æŠã‚¨ãƒªã‚¢ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        document.getElementById('parking-selection').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // é§è»Šå ´ã‚¹ãƒãƒƒãƒˆç”Ÿæˆ
    function generateParkingSpots() {
        const spotsContainer = document.getElementById('parking-spots');
        if (!spotsContainer) return;
        
        spotsContainer.innerHTML = '';
        
        const availableText = window.i18n('booking.available');
        const reservedText = window.i18n('booking.reserved');
        const spotUnit = window.i18n('booking.parking.spot');
        
        // ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ï¼šâ‘¢ç•ªã¯äºˆç´„æ¸ˆã¿
        const reservedSpots = [3];
        
        for (let i = 1; i <= 8; i++) {
            const btn = document.createElement('button');
            const isReserved = reservedSpots.includes(i);
            
            btn.className = `parking-btn p-4 rounded-lg text-center transition ${
                isReserved 
                ? 'bg-gray-200 border-2 border-gray-400 cursor-not-allowed' 
                : 'bg-green-100 border-2 border-green-500 hover:bg-green-200'
            }`;
            
            if (!isReserved) {
                btn.onclick = () => selectParking(i);
            }
            
            const spotNumbers = ['â‘ ', 'â‘¡', 'â‘¢', 'â‘£', 'â‘¤', 'â‘¥', 'â‘¦', 'â‘§'];
            btn.innerHTML = `
                <div class="font-bold ${isReserved ? 'text-gray-600' : 'text-green-900'}">
                    ${spotNumbers[i-1]}${spotUnit}
                </div>
                <div class="text-xs ${isReserved ? 'text-gray-500' : 'text-green-700'}">
                    ${isReserved ? reservedText : availableText}
                </div>
            `;
            
            spotsContainer.appendChild(btn);
        }
    }

    // é§è»Šå ´ã‚’é¸æŠ
    function selectParking(num) {
        if (!selectedParkingDate) {
            alert('æ—¥ä»˜ã‚’é¸æŠã—ã¦ãã ã•ã„');
            return;
        }
        window.location.href = `booking-confirm.html?date=${selectedParkingDate}&facility=parking&num=${num}`;
    }

    // DOMèª­ã¿è¾¼ã¿å®Œäº†æ™‚
    document.addEventListener('DOMContentLoaded', function() {
      window.languageManager.init();
      window.languageManager.updatePage(); 
      window.languageManager.updateLanguageButtons(); 
      
      // è¨€èªåˆ‡ã‚Šæ›¿ãˆæ™‚ã«å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚‚æ›´æ–°
      window.languageManager.dynamicHooks.push(generateCalendar);
      window.languageManager.dynamicHooks.push(generateParkingCalendar);
      window.languageManager.dynamicHooks.push(function() {
          if (!document.getElementById('parking-selection').classList.contains('hidden')) {
              generateParkingSpots();
          }
      });
      
      // åˆå›ç”Ÿæˆ
      generateCalendar();
      generateParkingCalendar();
    });
  </script>
</body>
</html>
