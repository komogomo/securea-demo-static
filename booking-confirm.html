<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n="booking.confirm.title">äºˆç´„ç¢ºèª - ã‚»ã‚­ãƒ¥ãƒ¬ã‚¢ã‚·ãƒ†ã‚£</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="css/custom.css">
  
  <script>
    window.i18nData = {
      ja: {
        'back': 'æˆ»ã‚‹',
        'booking.confirm.title': 'äºˆç´„ç¢ºèª', 'booking.confirm.details': 'äºˆç´„å†…å®¹',
        'booking.confirm.facility': 'æ–½è¨­', 'booking.hall.name_only': 'é›†ä¼šæ‰€ï¼ˆã‚»ã‚­ãƒ¥ãƒ¬ã‚¢ã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰',
        'booking.parking.name_only': 'ã‚²ã‚¹ãƒˆé§è»Šå ´', 'booking.parking.spot': 'ç•ª',
        'booking.confirm.datetime': 'äºˆç´„æ—¥æ™‚', 'booking.confirm.applicant': 'ç”³è¾¼è€…',
        'booking.confirm.user_id': 'ä½æˆ¸ç•ªå· B71', 'booking.confirm.purpose': 'ä½¿ç”¨ç›®çš„',
        'booking.confirm.purpose_placeholder': 'ä¾‹ï¼šå­ä¾›ã®èª•ç”Ÿæ—¥ä¼š', 'booking.confirm.attendees': 'å‚åŠ äººæ•°ï¼ˆç›®å®‰ï¼‰',
        'booking.confirm.attendees_placeholder': 'ä¾‹ï¼š15', 'booking.confirm.attendees_note': 'é›†ä¼šæ‰€ã®å®šå“¡ã¯ç´„30åã§ã™',
        'booking.confirm.notes': 'ğŸ“Œ ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦', 'booking.confirm.notes.1': 'â€¢ ä½¿ç”¨å¾Œã¯æ¸…æƒã‚’ãŠé¡˜ã„ã—ã¾ã™',
        'booking.confirm.notes.2': 'â€¢ ã‚´ãƒŸã¯å„è‡ªã§ãŠæŒã¡å¸°ã‚Šãã ã•ã„', 'booking.confirm.notes.3': 'â€¢ è¨­å‚™ã®ç ´æãƒ»æ±šæãŒã‚ã£ãŸå ´åˆã¯ã”é€£çµ¡ãã ã•ã„',
        'booking.confirm.notes.4': 'â€¢ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®å ´åˆã¯å‰æ—¥ã¾ã§ã«ã”é€£çµ¡ãã ã•ã„', 'booking.confirm.agree': 'ä¸Šè¨˜ã®æ³¨æ„äº‹é …ã‚’ç¢ºèªã—ã€åŒæ„ã—ã¾ã™',
        'booking.confirm.button': 'äºˆç´„ã‚’ç¢ºå®š', 'booking.confirm.allday': 'çµ‚æ—¥', 'survey.required': '*å¿…é ˆ',
        'alert.agree_required': 'æ³¨æ„äº‹é …ã«åŒæ„ã—ã¦ãã ã•ã„', 'alert.purpose_required': 'ä½¿ç”¨ç›®çš„ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
        'alert.booking_complete': 'äºˆç´„ãŒå®Œäº†ã—ã¾ã—ãŸï¼\n\näºˆç´„å†…å®¹ã‚’ç¢ºèªãƒ¡ãƒ¼ãƒ«ã§é€ä¿¡ã—ã¾ã—ãŸã€‚\nï¼ˆå®Ÿé‹ç”¨ç‰ˆã®æ©Ÿèƒ½ï¼‰'
      },
      en: {
        'back': 'Back',
        'booking.confirm.title': 'Booking Confirmation', 'booking.confirm.details': 'Booking Details',
        'booking.confirm.facility': 'Facility', 'booking.hall.name_only': 'Meeting Room (SECUREA Station)', 
        'booking.parking.name_only': 'Guest Parking', 'booking.parking.spot': ' Spot',
        'booking.confirm.datetime': 'Date & Time', 'booking.confirm.applicant': 'Applicant',
        'booking.confirm.user_id': 'Room No. B71', 'booking.confirm.purpose': 'Purpose',
        'booking.confirm.purpose_placeholder': 'e.g., Children\'s birthday party', 'booking.confirm.attendees': 'Attendees (Est.)',
        'booking.confirm.attendees_placeholder': 'e.g., 15', 'booking.confirm.attendees_note': 'Meeting room capacity is approx. 30 people',
        'booking.confirm.notes': 'ğŸ“Œ Terms & Conditions', 'booking.confirm.notes.1': 'â€¢ Please clean up after use',
        'booking.confirm.notes.2': 'â€¢ Please take your trash with you', 'booking.confirm.notes.3': 'â€¢ Please report any damage or stains to the equipment',
        'booking.confirm.notes.4': 'â€¢ Please contact us by the day before if you need to cancel', 'booking.confirm.agree': 'I agree to the terms and conditions above',
        'booking.confirm.button': 'Confirm Booking', 'booking.confirm.allday': 'All day', 'survey.required': '*Required', 
        'alert.agree_required': 'Please agree to the terms and conditions', 'alert.purpose_required': 'Please enter the purpose of use',
        'alert.booking_complete': 'Booking completed!\n\nA confirmation email has been sent.\n(Live version feature)'
      },
      zh: {
        'back': 'è¿”å›',
        'booking.confirm.title': 'é¢„çº¦ç¡®è®¤', 'booking.confirm.details': 'é¢„çº¦å†…å®¹',
        'booking.confirm.facility': 'è®¾æ–½', 'booking.hall.name_only': 'ä¼šè®®å®¤ï¼ˆSECUREA Stationï¼‰',
        'booking.parking.name_only': 'è®¿å®¢åœè½¦åœº', 'booking.parking.spot': 'å·',
        'booking.confirm.datetime': 'é¢„çº¦æ—¥æœŸæ—¶é—´', 'booking.confirm.applicant': 'ç”³è¯·äºº',
        'booking.confirm.user_id': 'æˆ¿å· B71', 'booking.confirm.purpose': 'ä½¿ç”¨ç›®çš„',
        'booking.confirm.purpose_placeholder': 'ä¾‹å¦‚ï¼šå­©å­çš„ç”Ÿæ—¥æ´¾å¯¹', 'booking.confirm.attendees': 'å‚åŠ äººæ•°ï¼ˆå¤§çº¦ï¼‰',
        'booking.confirm.attendees_placeholder': 'ä¾‹å¦‚ï¼š15', 'booking.confirm.attendees_note': 'ä¼šè®®å®¤å®¹é‡çº¦ä¸º30äºº',
        'booking.confirm.notes': 'ğŸ“Œ ä½¿ç”¨æ³¨æ„äº‹é¡¹', 'booking.confirm.notes.1': 'â€¢ ä½¿ç”¨åè¯·æ‰“æ‰«å¹²å‡€',
        'booking.confirm.notes.2': 'â€¢ è¯·è‡ªè¡Œå¸¦èµ°åƒåœ¾', 'booking.confirm.notes.3': 'â€¢ å¦‚æœ‰è®¾å¤‡æŸåæˆ–æ±¡æŸï¼Œè¯·è”ç³»æˆ‘ä»¬',
        'booking.confirm.notes.4': 'â€¢ å¦‚éœ€å–æ¶ˆï¼Œè¯·æœ€æ™šäºå‰ä¸€å¤©è”ç³»', 'booking.confirm.agree': 'æˆ‘å·²ç¡®è®¤å¹¶åŒæ„ä¸Šè¿°æ³¨æ„äº‹é¡¹',
        'booking.confirm.button': 'ç¡®å®šé¢„çº¦', 'booking.confirm.allday': 'å…¨å¤©', 'survey.required': '*å¿…éœ€',
        'alert.agree_required': 'è¯·åŒæ„æ³¨æ„äº‹é¡¹', 'alert.purpose_required': 'è¯·è¾“å…¥ä½¿ç”¨ç›®çš„',
        'alert.booking_complete': 'é¢„çº¦å·²å®Œæˆï¼\n\né¢„çº¦å†…å®¹çš„ç¡®è®¤é‚®ä»¶å·²å‘é€ã€‚\nï¼ˆå®é™…è¿è¥ç‰ˆåŠŸèƒ½ï¼‰'
      }
    };
  </script>
</head>
<body class="bg-gray-50">
  <div class="fixed top-4 right-4 language-switcher z-50 shadow-lg"> <button class="lang-btn" data-lang="ja">JA</button> <button class="lang-btn" data-lang="en">EN</button> <button class="lang-btn" data-lang="zh">ZHS</button> </div>
  <header class="bg-white shadow-sm"> <div class="max-w-4xl mx-auto px-4 py-4"> <div class="flex items-center gap-3"> <button onclick="window.history.back()" class="text-gray-600 hover:text-gray-900"> <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg> </button> <h1 class="text-xl font-bold text-gray-900" data-i18n="booking.confirm.title">äºˆç´„ç¢ºèª</h1> </div> </div> </div> </header>
  <main class="max-w-4xl mx-auto px-4 py-6 pb-32"> <div class="bg-white rounded-lg shadow-sm p-6 mb-6 fade-in"> <h2 class="text-lg font-bold text-gray-900 mb-4" data-i18n="booking.confirm.details">äºˆç´„å†…å®¹</h2> <div class="space-y-4"> <div class="flex items-start gap-3"> <svg class="w-6 h-6 text-blue-600 flex-shrink-0 mt-1" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"/></svg> <div class="flex-1"> <div class="text-sm text-gray-600" data-i18n="booking.confirm.facility">æ–½è¨­</div> <div id="facilityName" class="text-lg font-bold text-gray-900">...</div> </div> </div> <div class="flex items-start gap-3"> <svg class="w-6 h-6 text-blue-600 flex-shrink-0 mt-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/></svg> <div class="flex-1"> <div class="text-sm text-gray-600" data-i18n="booking.confirm.datetime">äºˆç´„æ—¥æ™‚</div> <div id="dateTime" class="text-lg font-bold text-gray-900">...</div> </div> </div> <div class="flex items-start gap-3"> <svg class="w-6 h-6 text-blue-600 flex-shrink-0 mt-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/></svg> <div class="flex-1"> <div class="text-sm text-gray-600" data-i18n="booking.confirm.applicant">ç”³è¾¼è€…</div> <div class="text-lg font-bold text-gray-900" data-i18n="booking.confirm.user_id">ä½æˆ¸ç•ªå· B71</div> </div> </div> <div id="purposeSection"> <label class="block text-sm font-bold text-gray-700 mb-2"> <span data-i18n="booking.confirm.purpose">ä½¿ç”¨ç›®çš„</span> <span class="text-red-600" data-i18n="survey.required">*</span> </label> <textarea id="purpose" rows="3" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none" data-i18n-placeholder="booking.confirm.purpose_placeholder" placeholder="ä¾‹ï¼šå­ä¾›ã®èª•ç”Ÿæ—¥ä¼š" ></textarea> </div> <div id="attendeesSection"> <label class="block text-sm font-bold text-gray-700 mb-2" data-i18n="booking.confirm.attendees"> å‚åŠ äººæ•°ï¼ˆç›®å®‰ï¼‰ </label> <input type="number" id="attendees" min="1" max="30" class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" data-i18n-placeholder="booking.confirm.attendees_placeholder" placeholder="ä¾‹ï¼š15" > <p class="text-sm text-gray-500 mt-1" data-i18n="booking.confirm.attendees_note">é›†ä¼šæ‰€ã®å®šå“¡ã¯ç´„30åã§ã™</p> </div> </div> </div> <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 fade-in"> <h3 class="font-bold text-yellow-900 mb-2" data-i18n="booking.confirm.notes">ğŸ“Œ ã”åˆ©ç”¨ã«ã‚ãŸã£ã¦</h3> <ul class="text-sm text-yellow-800 space-y-1"> <li data-i18n="booking.confirm.notes.1">â€¢ ä½¿ç”¨å¾Œã¯æ¸…æƒã‚’ãŠé¡˜ã„ã—ã¾ã™</li> <li data-i18n="booking.confirm.notes.2">â€¢ ã‚´ãƒŸã¯å„è‡ªã§ãŠæŒã¡å¸°ã‚Šãã ã•ã„</li> <li data-i18n="booking.confirm.notes.3">â€¢ è¨­å‚™ã®ç ´æãƒ»æ±šæãŒã‚ã£ãŸå ´åˆã¯ã”é€£çµ¡ãã ã•ã„</li> <li data-i18n="booking.confirm.notes.4">â€¢ ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã®å ´åˆã¯å‰æ—¥ã¾ã§ã«ã”é€£çµ¡ãã ã•ã„</li> </ul> </div> <div class="bg-white rounded-lg shadow-sm p-6 mb-6 fade-in"> <label class="flex items-start cursor-pointer"> <input type="checkbox" id="agree" class="w-5 h-5 text-blue-600 rounded mt-1"> <span class="ml-3 text-gray-900" data-i18n="booking.confirm.agree"> ä¸Šè¨˜ã®æ³¨æ„äº‹é …ã‚’ç¢ºèªã—ã€åŒæ„ã—ã¾ã™ </span> </label> </div> <div class="flex gap-4 fade-in"> <button onclick="window.history.back()" class="flex-1 bg-gray-100 text-gray-700 py-4 rounded-lg font-bold hover:bg-gray-200 transition" data-i18n="back">æˆ»ã‚‹</button> <button onclick="handleConfirm()" class="flex-1 bg-blue-600 text-white py-4 rounded-lg font-bold btn-primary" > <span data-i18n="booking.confirm.button">äºˆç´„ã‚’ç¢ºå®š</span> </button> </div> </main>

  <script>
    class EmbeddedLanguageManager{constructor(){this.currentLanguage=localStorage.getItem('language')||'ja';this.translations=window.i18nData;this.dynamicHooks=[]}setLanguage(a){if(this.translations[a]){this.currentLanguage=a;localStorage.setItem('language',a);this.updatePage();this.updateLanguageButtons();this.dynamicHooks.forEach(b=>b())}}translate(a){const b=this.translations[this.currentLanguage];return b&&b[a]?b[a]:a}updatePage(){document.querySelectorAll('[data-i18n]').forEach(a=>{const b=a.getAttribute('data-i18n'),c=this.translate(b);if(a.children.length===0)a.textContent=c;else for(let d of a.childNodes)if(d.nodeType===Node.TEXT_NODE&&d.textContent.trim()){d.textContent=c;break}});document.querySelectorAll('[data-i18n-placeholder]').forEach(a=>{const b=a.getAttribute('data-i18n-placeholder');a.placeholder=this.translate(b)});const a=document.querySelector('title[data-i18n]');if(a){const b=a.getAttribute('data-i18n');document.title=this.translate(b)}}updateLanguageButtons(){document.querySelectorAll('.lang-btn').forEach(a=>{const b=a.getAttribute('data-lang');a.classList.toggle('active',b===this.currentLanguage);a.classList.toggle('inactive',b!==this.currentLanguage)})}init(){document.querySelectorAll('.lang-btn').forEach(a=>{a.addEventListener('click',()=>{const b=a.getAttribute('data-lang');this.setLanguage(b)})})}getCurrentLanguage(){return this.currentLanguage}}
    window.languageManager = new EmbeddedLanguageManager(); window.i18n = function(key) { return window.languageManager.translate(key); };
    
    function handleConfirm(){
      const agree = document.getElementById('agree').checked;
      if(!agree){
        alert(window.i18n('alert.agree_required'));
        return;
      }
      const purpose = document.getElementById('purpose').value;
      if(typeof facility!=='undefined'&&facility==='hall'&&!purpose){
        alert(window.i18n('alert.purpose_required'));
        return;
      }
      
      // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰äºˆç´„æƒ…å ±ã‚’å–å¾—
      const urlParams = new URLSearchParams(window.location.search);
      const date = urlParams.get('date') || '2025-10-25';
      const parkingNum = urlParams.get('num');
      
      // LocalStorageã‹ã‚‰æ—¢å­˜ã®äºˆç´„ã‚’å–å¾—
      let bookings = [];
      const bookingsJson = localStorage.getItem('bookings');
      if (bookingsJson) {
        bookings = JSON.parse(bookingsJson);
      }
      
      // æ–°ã—ã„äºˆç´„ã‚’è¿½åŠ 
      const newBooking = {
        id: Date.now(), // ç°¡æ˜“çš„ãªIDç”Ÿæˆ
        facility: facility,
        date: date,
        status: 'active',
        createdAt: new Date().toISOString().split('T')[0]
      };
      
      if (facility === 'hall') {
        newBooking.time = '9:00-12:00';
        newBooking.purpose = purpose;
      } else {
        newBooking.time = 'allday';
        newBooking.parkingNum = parkingNum;
      }
      
      bookings.push(newBooking);
      
      // LocalStorageã«ä¿å­˜
      localStorage.setItem('bookings', JSON.stringify(bookings));
      
      alert(window.i18n('alert.booking_complete'));
      window.location.href='booking-history.html';
    }
    let facility='hall';

    // â˜… updateBookingDetails é–¢æ•°ã‚’å®šç¾© (å‹•çš„ãƒ•ãƒƒã‚¯ç”¨)
    function updateBookingDetails() {
        const urlParams = new URLSearchParams(window.location.search);
        const date = urlParams.get('date') || '2025-10-25';
        facility = urlParams.get('facility') || 'hall'; 
        const parkingNum = urlParams.get('num');

        const facilityNameEl = document.getElementById('facilityName');
        const dateTimeEl = document.getElementById('dateTime');
        const purposeSection = document.getElementById('purposeSection');
        const attendeesSection = document.getElementById('attendeesSection');

        if (!facilityNameEl || !dateTimeEl) return; // è¦ç´ ãƒã‚§ãƒƒã‚¯

        if (facility === 'parking') {
            const parkingNameBase = window.i18n('booking.parking.name_only');
            const parkingSpotUnit = window.i18n('booking.parking.spot');
            facilityNameEl.textContent = `${parkingNameBase} ${parkingNum}${parkingSpotUnit}`;
            
            const alldayText = window.i18n('booking.confirm.allday');
            dateTimeEl.textContent = `${date.replace(/-/g, '/')} ${alldayText}`;
            
            if(purposeSection) purposeSection.style.display = 'none';
            if(attendeesSection) attendeesSection.style.display = 'none';
        } else { // facility === 'hall'
            facilityNameEl.textContent = window.i18n('booking.hall.name_only');
            // æ—¥æ™‚ã¯ãƒ‡ãƒ¢ç”¨ã«å›ºå®š (å¤šè¨€èªå¯¾å¿œä¸è¦ãªéƒ¨åˆ†)
            dateTimeEl.textContent = `${date.replace(/-/g, '/')}ï¼ˆåœŸï¼‰9:00-12:00`; 
            
            if(purposeSection) purposeSection.style.display = 'block';
            if(attendeesSection) attendeesSection.style.display = 'block';
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
      window.languageManager.init();
      window.languageManager.updatePage(); 
      window.languageManager.updateLanguageButtons(); 

      // â˜… äºˆç´„è©³ç´°ã®è¡¨ç¤ºæ›´æ–°ã‚’å‹•çš„ãƒ•ãƒƒã‚¯ã«ç™»éŒ²
      window.languageManager.dynamicHooks.push(updateBookingDetails);

      // â˜… åˆå›æç”»
      updateBookingDetails();
    });
  </script>
</body>
</html>